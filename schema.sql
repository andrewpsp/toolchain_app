CREATE TABLE JOB(
  JOB_ID BIGINT AUTO_INCREMENT PRIMARY KEY,
  NAME VARCHAR(32) NOT NULL,
  JOB_NUMBER CHAR(4) NOT NULL UNIQUE
);

CREATE TABLE AGENT(
  AGENT_ID BIGINT AUTO_INCREMENT PRIMARY KEY,
  TITLE VARCHAR(64)
);

CREATE TABLE PIPELINE (
  PIPELINE_ID BIGINT AUTO_INCREMENT PRIMARY KEY,
  JOB_ID BIGINT NOT NULL, 
  AGENT_ID BIGINT NOT NULL,
  BUILD_INFO DATE
);

ALTER TABLE PIPELINE ADD FOREIGN KEY (JOB_ID) JOBS JOB(JOB_ID); /* JOB_ID contains is_deployed_state and is_ready_state */
ALTER TABLE PIPELINE ADD FOREIGN KEY (AGENT_ID) AGENTS AGENT(AGENT_ID);
CREATE INDEX IDX_BUILD_INFO ON PIPELINE(BUILD_INFO);
